<font face="Simsun" size=3>

[TOC]

### 一. mysql

- [文档](https://hub.docker.com/_/mysql)

#### - 5.7
~~~
# 1. build
docker build -t mysql5.7 -f Dckerfile-mysql5.7 .

# 2. 挂载到本地数据 --name mysql-5.7
docker run -p 3307:3306 -d -e MYSQL_ROOT_PASSWORD=c.c.5664 -v /home/data/mysql/mysql5.7/var/lib/mysql:/var/lib/mysql -v /home/data/mysql/mysql5.7/etc/mysql:/etc/mysql mysql5.7

# 3. 进入容器
docker exec -it name bash

# 4. 登录
mysql  -u root -p
c.c.5664

# 5. 执行恢复数据脚本
source /mysql/privileges.sql
source /mysql/backup.sql
~~~
#### - 8.0
~~~
# 1. build
docker build -t mysql8.0 -f Dckerfile-mysql8.0 .

# 2.  正确 没有命名 --name mysql-8.0
docker run -p 3308:3306 -d --restart=always -e MYSQL_ROOT_PASSWORD=c.c.5664  -v /home/data/mysql/mysql8.0/var/lib/mysql:/var/lib/mysql mysql8.0

# 3. 进入容器
docker exec -it name bash

# 4. 登录
mysql  -u root -p
c.c.5664/ 本地不需要密码

# 5. 执行恢复数据脚本
source /mysql/privileges.sql;
source /mysql/backup.sql;
~~~

### 二. redis

- [文档](https://hub.docker.com/_/redis)

#### - 单节点 6379
- 还没配置集群,目前够用
- [ ] 分片 默认16个
- [ ] 集群
- [ ] 订阅
~~~
# 启动脚本
sh docker-redis.sh
#　本地链接
 redis-cli -h 180.76.156.43 -p 6379 -a c.c.5664
# docker 启动
docker run -v /myredis/conf:/usr/local/etc/redis --name myredis redis redis-server /usr/local/etc/redis/redis.conf
# 可选参数
 -v /home/redis/myredis/myredis.conf:/etc/redis/redis.conf
 -v /home/redis/myredis/data:/data
 --restart=always  总是开机启动
 --log-opt max-size=100m  日志
 --log-opt max-file=2 
 -p 6379:6379 
 --name myredis 
 -v /home/redis/myredis/myredis.conf:/etc/redis/redis.conf -v /home/redis/myredis/data:/data 
 -d redis 
 redis-server /etc/redis/redis.conf   以配置文件启动
 --appendonly yes  持久化
 --requirepass 123456 密码
~~~

### 三. ftp

- [文档](https://hub.docker.com/r/fauria/vsftpd)

~~~
# 1. 下载镜像 
docker pull fauria/vsftpd
# 2. 运行
docker run -d -p 20:20 -p 21:21 -p 21100-21110:21100-21110 -v /home/data/ftp/data:/home/vsftpd -v /home/data/ftp/log:/var/log/vsftpd -e FTP_USER=everforcc -e FTP_PASS=c.c.5664 -e PASV_ADDRESS=0.0.0.0 -e PASV_MIN_PORT=21100 -e PASV_MAX_PORT=21110 --name cc-vsftpd --restart=always fauria/vsftpd
# 3. windows文件夹
ftp://everforcc:c.c.5664@180.76.156.43/

# 或者随后在容器内创建,详细的看官方文档
# vi /etc/vsftpd/virtual_users.txt
~~~

</font>